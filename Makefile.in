#========================================================================
#
# Main xpdf Makefile.
#
# Copyright 1996-2003 Glyph & Cog, LLC
#
#========================================================================

SHELL = /bin/sh

DESTDIR =

prefix = @prefix@
exec_prefix = @exec_prefix@
srcdir = @srcdir@

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@

EXE = @EXE@

all:
	cd goo; $(MAKE)
	cd @UP_DIR@fofi; $(MAKE)
	cd @UP_DIR@splash; $(MAKE)
	cd @UP_DIR@xpdf; $(MAKE) @XPDF_TARGET@

xpdf: dummy
	cd goo; $(MAKE)
	cd @UP_DIR@fofi; $(MAKE)
	cd @UP_DIR@splash; $(MAKE)
	cd @UP_DIR@xpdf; $(MAKE) xpdf$(EXE)

dummy:

install: dummy
	-mkdir -p $(DESTDIR)@bindir@
@X@	$(INSTALL_PROGRAM) xpdf/xpdf$(EXE) $(DESTDIR)@bindir@/xpdf$(EXE)
	-mkdir -p $(DESTDIR)@mandir@/man1
@X@	$(INSTALL_DATA) $(srcdir)/doc/xpdf.1 $(DESTDIR)@mandir@/man1/xpdf.1
	-mkdir -p $(DESTDIR)@mandir@/man5
	$(INSTALL_DATA) $(srcdir)/doc/xpdfrc.5 $(DESTDIR)@mandir@/man5/xpdfrc.5
	-mkdir -p $(DESTDIR)@sysconfdir@
	@if test ! -f $(DESTDIR)@sysconfdir@/xpdfrc; then \
		echo "$(INSTALL_DATA) $(srcdir)/doc/sample-xpdfrc $(DESTDIR)@sysconfdir@/xpdfrc"; \
		$(INSTALL_DATA) $(srcdir)/doc/sample-xpdfrc $(DESTDIR)@sysconfdir@/xpdfrc; \
	else \
		echo "# not overwriting the existing $(DESTDIR)@sysconfdir@/xpdfrc"; \
	fi

clean:
	-cd goo; $(MAKE) clean
	-cd @UP_DIR@fofi; $(MAKE) clean
	-cd @UP_DIR@splash; $(MAKE) clean
	-cd @UP_DIR@xpdf; $(MAKE) clean

distclean: clean
	rm -f config.log config.status config.cache
	rm -f aconf.h
	rm -f Makefile goo/Makefile xpdf/Makefile
	rm -f goo/Makefile.dep fofi/Makefile.dep splash/Makefile.dep xpdf/Makefile.dep
	rm -f goo/Makefile.in.bak fofi/Makefile.in.bak splash/Makefile.in.bak xpdf/Makefile.in.bak
	touch goo/Makefile.dep
	touch fofi/Makefile.dep
	touch splash/Makefile.dep
	touch xpdf/Makefile.dep

depend:
	cd goo; $(MAKE) depend
	cd @UP_DIR@fofi; $(MAKE) depend
	cd @UP_DIR@splash; $(MAKE) depend
	cd @UP_DIR@xpdf; $(MAKE) depend
